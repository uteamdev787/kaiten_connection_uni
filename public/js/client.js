Addon.initialize({
  // 1. –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–∫–∏
  'card_buttons': async (cardButtonsContext) => {
    
    // –ü–æ–ª—É—á–∞–µ–º ID –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∫–∞—Ä—Ç–æ—á–∫–∞
    const card = await cardButtonsContext.getCard();
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ —Å—á–µ—Ç–æ–≤ (id 517319)
    if (card.space.id !== 517319) {
      return [];
    }

    // –ï—Å–ª–∏ —ç—Ç–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ —Å—á–µ—Ç–æ–≤, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–Ω–æ–ø–∫—É
    return [{
      text: 'üîó –°–≤—è–∑–∞—Ç—å —Å –¥–æ–≥–æ–≤–æ—Ä–æ–º',
      callback: async (buttonContext) => {
        // –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ (popup)
        return buttonContext.openPopup({
          type: 'iframe',
          title: '–°–≤—è–∑—ã–≤–∞–Ω–∏–µ —Å –¥–æ–≥–æ–≤–æ—Ä–æ–º –ø–æ –ò–ù–ù',
          url: './public/views/link-contract.html', // URL –Ω–∞—à–µ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
          height: 200, // –í—ã—Å–æ—Ç–∞ –±—É–¥–µ—Ç –∞–≤—Ç–æ-–ø–æ–¥—Å—Ç—Ä–æ–µ–Ω–∞ —Å–∫—Ä–∏–ø—Ç–æ–º
          width: 500
        });
      }
    }];
  },

  // 2. –î–æ–±–∞–≤–ª—è–µ–º –∑–Ω–∞—á–æ–∫ (–±–µ–π–¥–∂) –Ω–∞ —Ñ–∞—Å–∞–¥ –∫–∞—Ä—Ç–æ—á–∫–∏
  'card_facade_badges': async (context) => {
    const card = await context.getCard();
    
    // –ï—Å–ª–∏ —É –∫–∞—Ä—Ç–æ—á–∫–∏ –µ—Å—Ç—å —Ä–æ–¥–∏—Ç–µ–ª—å, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–µ–ª–µ–Ω—ã–π –±–µ–π–¥–∂
    if (card.parent_id) {
      return {
        text: '‚úì –°–≤—è–∑–∞–Ω —Å –¥–æ–≥–æ–≤–æ—Ä–æ–º',
        color: 'green'
      };
    }
    // –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º
    return null;
  }
});
